# 원시값과 객체의 비교

## 원시값

- **원시값은 변경 불가능한 값(immutable value)이다. 원시값 자체를 변경할수 없다는 것이며, 변수 값은 재할당을 통해 변경할 수 있다**
- **원시값은 불변성의 특성을 갖기 때문에 데이터의 신뢰성을 보장한다**
- **원시값을 할당한 변수에 새로운 원시값을 재할당하면 메모리 공간에 저장되어 있는 재할당 이전의 원시값을 변경하는 것이 아니라 새로운 메모리 공간을 확보하고 원시값을 재할당한다**

**예시**

- **아래와 같이 변수에 원시값을 갖는 변수를 할당하면 할당받는 변수(copy)에는 할당되는 변수(score)의 원시값이 복사되어 전달된다. 이를 값에 의한 전달이라 한다**

**예시**

```js
var score = 80;

// copy 변수에는 score 변수의 값 80이 복사되어 할당된다.
var copy = score;

console.log(score, copy); // 80  80
console.log(score === copy); // true
```

## 객체

- **객체는 변경 가능한 값(mutable value)이다**
- **객체는 원시값과 같이 확보해야 할 메모리 공간의 크기를 사전에 정해 둘 수 없다**
- **객체를 할당한 변수에는 생성된 객체가 실제로 저장된 메모리 공간의 주소가 저장되어 있다. 이 값을 참조값이라 한다**
- **객체는 메모리에 저장된 객체를 직접 수정할 수 있다. 이때 객체를 할당한 변수에 재할당을 한 것이 아니므로 참조값은 변경되지 않고 객체 자체가 변경된다**

**예시**

```js
var person = {
  name: "Lee",
};

// 프로퍼티 값 갱신
person.name = "Kim";

// 프로퍼티 동적 생성
person.address = "Seoul";

console.log(person); // {name: "Kim", address: "Seoul"}
```

- **아래와 같이 변수(person)를 다른 변수(copy)에 할당하면 원본의 참조값이 복사되어 전달된다. 이를 참조에 의한 전달이라 한다**

**예시**

```js
var person = {
  name: "Lee",
};

// 참조값을 복사
var copy = person;
```

### 깊은 복사와 얕은 복사

**1. 깊은 복사는 원시값처럼 값 자체를 그대로 복사해 다른 메모리 주소를 생성하는 것을 뜻한다. 다른 메모리 주소를 생성하기 때문에 복사된 변수와 기존 변수는 서로 영향을 받지않아 신뢰성이 보장된다**

**2. 얕은 복사는 객체처럼 참조값을 복사해 객체를 갖는 참조값을 공유하는 것을 뜻한다. 참조값을 공유하기 때문에 복사된 변수에서 객체를 생성 및 수정하면 기존 변수에도 영향을 끼치기 때문에 주의해야한다**

**깊은 복사와 얕은 복사 예시**

```js
const v = 1;

// "깊은 복사"라고 부르기도 한다.
const c1 = v;
console.log(c1 === v); // true

const o = {
  x: 1,
};

// "얕은 복사"라고 부르기도 한다.
const c2 = o;
console.log(c2 === o); // true -> 하나의 객체를 가리키는 동일한 참조값을 가진다
```

## 강의 내용 및 러버덕 요약

- 원시 타입의 값에는 string, number, boolean, undefined, null, symbol 이 있다
- 객체 타입의 값은 원시값을 제외한 나머지 값들(함수, 배열, 객체, 정규표현식 등)이다
- 변수에 원시값을 할당할 경우 메모리 공간에는 실제 값이 저장되지만 객체를 할당할 경우에는 메모리 공간에는 객체 값의 메모리 공간을 가리키는 메모리 주소가 참조값으로 저장된다
- 객체가 할당된 변수는 참조값을 가리키기 때문에 여러개의 식별자가 하나의 객체를 공유할 수 있다 -> 서로 다른 변수가 같은 객체 값을 갖는다면 하나의 객체를 갖는 메모리 공간과 해당 객체를 가리키는 참조값이 저장된 메모리 공간 두개가 있다고 생각할 수 있다
- 값이 메모리에 저장되는 방식이 다르기 때문에 원시값은 값에 의한 전달이라 할 수 있고, 객체는 참조에 의한 전달이라 할 수 있다
- 변수에 원시값을 재할당 하게 되면 기존 변수가 차지하는 메모리 공간이 아닌 다른 메모리 공간에 재할당 된 값을 저장한다. 또한 서로 다른 변수가 같은 원시값을 갖는다면 같은 값을 갖는 두 개의 메모리 공간을 각기 가리킨다 -> 이러한 이유로 **원시값은 변경 불가능한 값**이다
- 객체는 프로퍼티의 갱신, 동적 생성 등 **변경 가능한 값**이다
- 문자열은 유사 배열 객체인데 배열처럼 인덱스를 통해 각 문자에 접근할 수 있고 length를 가지며 for문으로 순회할 수 있다. 하지만 동시에 원시값이기 때문에 인덱스로 문자열에 접근하여 해당 문자열을 변경할 수는 없다
- 깊은 복사는 원시값처럼 값 자체를 그대로 복사해 다른 메모리 주소를 생성하는 것을 뜻한다
- 얕은 복사는 객체처럼 참조값을 복사해 객체를 갖는 참조값을 공유하는 것을 뜻한다
- 객체의 얕은 복사를 하는 방법으로는 스프레드 문법 `{...}` 또는 `Object.assing` 메서드를 사용할 수 있다 -> 해당 방법으로 얕은 복사를 하게되면 한 단계의 객체는 객체 자체가 다른 메모리 공간에 복사되지만 중첩되어 있는 객체는 참조값이 복사된다
- 객체의 깊은 복사를 하는 방법으로는 lodash의 라이브러리를 사용하거나 `JSON.parse와 JSON.stringify`를 사용할 수 있다 -> 깊은 복사를 하게 되면 말 그대로 원시값처럼 같은 값을 서로 다른 메모리 공간에 복사할 뿐 객체의 프로퍼티의 변경이 불가능하게 동결하는 것은 아니다

출처 : https://poiemaweb.com/
